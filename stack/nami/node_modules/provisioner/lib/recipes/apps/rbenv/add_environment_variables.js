/// <reference path="../../../../typings-recipe.d.ts" />
/*
 * Add environment variables to shell sessions through an env file
 */
"use strict";
recipes.register({
    id: "rbenv-environment",
    on: { beforeInitialize: {} },
    conditions: {
        tierModules: { any: ["rbenv"] },
    },
    recipeHandler: function (input) {
        // This loop relies on the creation of the files by 'add-to-system-path' recipe executed in a previous hook
        for (let path of glob.sync("{/root/{.bashrc,.profile},/home/*/{.bashrc,.profile},/etc/skel/{.bashrc,.profile}}")) {
            platform.createFileSection(path, {
                title: "RBENV ENVIRONMENT SETTINGS",
                contents: "eval \"$(rbenv init -)\""
            });
        }
    }
});
