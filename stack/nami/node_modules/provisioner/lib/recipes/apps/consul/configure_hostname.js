/// <reference path="../../../../typings-recipe.d.ts" />
/*
 * Configure Hostname on Consul for VMWare
 */
"use strict";
recipes.register({
    id: "configure_hostname",
    on: { beforeInitialize: {} },
    conditions: {
        tierModules: { any: ["consul"] },
        cloudTags: { any: ["vmware"] },
    },
    recipeHandler: function (input) {
        try {
            runProgram("hostnamectl", ["set-hostname", provisioner.tierDefinition.getPeerHostnames("local")[0]]);
        }
        catch (e) {
            logger.warn("Unable to set hostname", e);
        }
    }
});
