/// <reference path="../../../../typings-recipe.d.ts" />
/*
 * Set custom path for TensorFlow Serving
 */
"use strict";
recipes.register({
    id: "set-tensorflow-path",
    on: { provisionMachine: {}, afterInitialize: {} },
    conditions: {
        tierModules: { any: ["tensorflow-serving"] },
        platformTags: { any: ["linux"] }
    },
    recipeHandler: function (input) {
        logger.info("Adding bazel-bin to system and sudoers path...");
        let tfPathList = platform.getAdditionalSystemPaths();
        tfPathList.push("/opt/bitnami/tensorflow-serving/serving/bazel-bin/tensorflow_serving/model_servers");
        platform.modifySystemPath({ add: tfPathList });
        platform.modifySudoersPath({ add: tfPathList });
    }
});
